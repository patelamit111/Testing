function mdcSearch(e){var t=mdc_searchable_results;mdcRemoveSearchResults();if(e.val().length>1){for(var n=0;n<t.length;n++){if(isSubstring(purposesString(n),currentSearchFilter)||currentSearchFilter=="all"){var r=t[n]["title"].replace(/(<([^>]+)>)/ig,"");if(isSubstring(r,e.val())){mdcAddSearchResult(n)}else{for(var i=0;i<t[n]["abbreviations"].length;i++){if(isSubstring(t[n]["abbreviations"][i],e.val())){mdcAddSearchResult(n)}}}}}}}function isSubstring(e,t){e=e.toLowerCase();t=t.toLowerCase();if(e.indexOf(t)!==-1)return true;else return false}function mdcRemoveSearchResults(){$("#mdc-search-results").empty();$("#mdc-search-results").addClass("hidden");currentSearchResult="none"}function mdcAddSearchResult(e){var t=mdc_searchable_results;var n=t[e]["title"];var r=t[e]["url"];if(t[e]["category"]){var i="category"}else{var i=""}$("#mdc-search-results").removeClass("hidden");var s=new RegExp($("#mdc-search").val(),"i");n=n.replace(s,"<span class='bgc-6'>$&</span>");var o=t[e]["short_description"];var u=window.location.search;var a="    <a class='mdc-search-result "+i+"' href='"+r+u+"'>      <div class='mdc-search-result-title'>"+n+"</div>      <div class='mdc-search-result-description tab-hidden'>"+o+"</div>    </a>    ";$("#mdc-search-results").append("    <a class='mdc-search-result "+i+"' href='"+r+u+"'>      <div class='mdc-search-result-title'>"+n+"</div>      <div class='mdc-search-result-description tab-hidden'>"+o+"</div>    </a>  ")}function purposesString(e){var t=mdc_searchable_results;var n=" ";for(var r=0;r<t[e]["purposes"].length;r++){n+=t[e]["purposes"][r];if(r!=t[e]["purposes"].length-1)n+=", "}return n}function setFullCookie(e,t,n){var r=new Date;r.setDate(r.getDate()+n);var i=escape(t)+(n==null?"":"; expires="+r.toUTCString());document.cookie=e+"="+i+";domain=mdcalc.com;path=/"}function getCookie(e){var t=document.cookie;var n=t.indexOf(" "+e+"=");if(n==-1){n=t.indexOf(e+"=")}if(n==-1){t=null}else{n=t.indexOf("=",n)+1;var r=t.indexOf(";",n);if(r==-1){r=t.length}t=unescape(t.substring(n,r))}return t}var currentSearchResult="none";var currentSearchFilter="all";var lastKeyCode;$(document).ready(function(){$("body").on("click",".favorites-on, .favorites-off",function(){get_vars=$(this).attr("getvars");var e=$(this);$.ajax({url:"/wp-content/themes/mdcalc2013/endpoints/mdc-favorites.php"+get_vars,data:String,success:function(t){if(t=="true"){get_vars=get_vars.split("=");if(get_vars[0]=="?add-post-to-favorites"){e.removeClass("star-grey star").addClass("star");e.attr("getvars","?remove-post-from-favorites="+get_vars[1]);$("#modal-win").text("Equation has been added to favorites.")}else{e.removeClass("star star-grey").addClass("star-grey");e.attr("getvars","?add-post-to-favorites="+get_vars[1]);$("#modal-win").text("Equation has been removed from favorites.")}}else{$("#modal-win").text("Sorry something has gone wrong. Please contact site administrator")}$("#modal-win").css("display","block");$("#modal-win").animate({opacity:1},300);$(".modal-win-overlay").css("display","block");$(".modal-win-overlay").animate({opacity:1},300)}});return false});$(window).resize(function(){if($(window).width()>1e3)$("#mobilemenu").addClass("hidden")});$(".close-me").click(function(){$(this).parent().toggleClass("active")});$(".user-options-trigger").click(function(){$(".user-options-box").toggleClass("active");$(this).toggleClass("active")});$(".user-options-trigger-mobile").click(function(){$(".user-options-box-mobile").toggleClass("active");$(this).toggleClass("active")});$("#mobmenbut").click(function(){$("#mobilemenu").toggleClass("hidden")});$(".modal-win-overlay").click(function(){$("#modal-win").css("display","none");$("#modal-win").animate({opacity:0},300);$(".modal-win-overlay").css("display","none");$(".modal-win-overlay").animate({opacity:0},300)});$(".favorite-me").click(function(){if(not_logged_in){$("#modal-win").html("Please <a style='text-decoration:underline;' href='/register/'>create an account</a> to save favorites.");$("#modal-win").css("display","block");$("#modal-win").animate({opacity:1},300);$(".modal-win-overlay").css("display","block");$(".modal-win-overlay").animate({opacity:1},300);return false}});$(".more-info-to-read").click(function(){return false});$("#search-right").click(function(){$("#mdc-search-options").toggleClass("show-nav");mdcRemoveSearchResults()});$("#mdc-search-options li").blur(function(){$("#mdc-search-options").removeClass("show-nav")});$(".inner-content").click(function(){$("#mdc-search-options").removeClass("show-nav")});$("#mdc-search-options li").click(function(){$("#mdc-search-options li").removeClass("fc-7");$(this).addClass("fc-7");$("#mdc-purpose-display").text($(this).attr("purpose"));currentSearchFilter=$(this).attr("purpose").toLowerCase();$("#mdc-search-options").removeClass("show-nav");mdcSearch($("#mdc-search"))});$("body").on("click",".mdc-search-result",function(){});$("#mdc-search").val($("#mdc-search").attr("default"));$("#mdc-search").focus(function(){$("#mdc-search-options").removeClass("show-nav");if($(this).val()==$(this).attr("default")){$(this).val("").removeClass("demosearch")}mdcSearch($(this))});$("#mdc-search").click(function(){if($(window).width()<1e3){setTimeout(function(){location.href="#mdc-search";if($(window).width()<1e3){$("body").css("overflow-y","hidden")}},700)}});$("#mdc-search").blur(function(){if($(this).val()===""){$(this).val($(this).attr("default")).addClass("demosearch")}$("body").css("overflow-y","auto");setTimeout(function(){mdcRemoveSearchResults()},400)});$("#mdc-search").keyup(function(){if(lastKeyCode!==40&&lastKeyCode!==38&&lastKeyCode!==13){mdcSearch($(this))}});$("#mdc-search").keydown(function(e){var t=e.keyCode||e.which;lastKeyCode=t;if(t==38){if(currentSearchResult!=="none"){if(currentSearchResult.prev().length>0){currentSearchResult=currentSearchResult.prev();$(".mdc-search-result").removeClass("bgc-1");currentSearchResult.addClass("bgc-1")}else{currentSearchResult="none";$(".mdc-search-result").removeClass("bgc-1")}}return false}else if(t==40){if(currentSearchResult==="none"){$(".mdc-search-result").removeClass("bgc-1");currentSearchResult=$(".mdc-search-result").first();currentSearchResult.addClass("bgc-1")}else{if(currentSearchResult.next().length>0){$(".mdc-search-result").removeClass("bgc-1");currentSearchResult=currentSearchResult.next();currentSearchResult.addClass("bgc-1")}}return false}else if(t==13){if(currentSearchResult!="none")window.location.href=currentSearchResult[0]["href"]}else{currentSearchResult="none"}return true})});+function(e){"use strict";var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r);var i=this.options.trigger.split(" ");for(var s=i.length;s--;){var o=i[s];if(o=="click")this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if(o!="manual"){var u=o=="hover"?"mouseenter":"focus",f=o=="hover"?"mouseleave":"blur";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(n.timeout),n.hoverState="in";if(!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(n.timeout),n.hoverState="out";if(!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);if(t.isDefaultPrevented())return;var n=this.tip();this.setContent(),this.options.animation&&n.addClass("fade");var r=typeof this.options.placement=="function"?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,s=i.test(r);s&&(r=r.replace(i,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(r),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var o=this.getPosition(),u=n[0].offsetWidth,f=n[0].offsetHeight;if(s){var l=this.$element.parent(),c=r,h=document.documentElement.scrollTop||document.body.scrollTop,p=this.options.container=="body"?window.innerWidth:l.outerWidth(),d=this.options.container=="body"?window.innerHeight:l.outerHeight(),v=this.options.container=="body"?0:l.offset().left;r=r=="bottom"&&o.top+o.height+f-h>d?"top":r=="top"&&o.top-h-f<0?"bottom":r=="right"&&o.right+u>p?"left":r=="left"&&o.left-u<v?"right":r,n.removeClass(c).addClass(r)}var m=this.getCalculatedOffset(r,o,u,f);this.applyPlacement(m,r),this.$element.trigger("shown.bs."+this.type)}},t.prototype.applyPlacement=function(e,t){var n,r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),e.top=e.top+o,e.left=e.left+u,r.offset(e).addClass("in");var a=r[0].offsetWidth,f=r[0].offsetHeight;t=="top"&&f!=s&&(n=!0,e.top=e.top+s-f);if(/bottom|top/.test(t)){var l=0;e.left<0&&(l=e.left*-2,e.left=0,r.offset(e),a=r[0].offsetWidth,f=r[0].offsetHeight),this.replaceArrow(l-i+a,a,"left")}else this.replaceArrow(f-s,f,"top");n&&r.offset(e)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function t(){n.hoverState!="in"&&r.detach()}var n=this,r=this.tip(),i=e.Event("hide.bs."+this.type);this.$element.trigger(i);if(i.isDefaultPrevented())return;return r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r.one(e.support.transition.end,t).emulateTransitionEnd(150):t(),this.$element.trigger("hidden.bs."+this.type),this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,r){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-n/2}:e=="top"?{top:t.top-r,left:t.left+t.width/2-n/2}:e=="left"?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s=typeof n=="object"&&n;i||r.data("bs.tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},t.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s=typeof n=="object"&&n;i||r.data("bs.popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery);$(".equation-icon, abbr, .tipp").tooltip();